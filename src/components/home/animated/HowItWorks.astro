<div
  class="flex w-full px-4 md:px-[120px] py-[80px] flex-col gap-[24px] items-center bg-[#f5f7fa] relative"
>
  <span class="text-[36px] font-bold text-[#28241f] text-center md:text-left"
    >How It Works</span
  >

  <!-- STEP FLOW: Numbers + Lines -->
  <div
    class="hidden md:flex justify-between items-center w-full max-w-[987px] mx-auto"
  >
    <!-- Step 1 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">1</span>
      </div>
    </div>

    <!-- Line 1 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/p0Y6n2e5S2.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 2 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[24px] font-semibold">2</span>
      </div>
    </div>

    <!-- Line 2 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/7JS9fieUBr.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 3 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">3</span>
      </div>
    </div>

    <!-- Line 3 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/kKLpbAtrCH.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 4 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">4</span>
      </div>
    </div>
  </div>

  <!-- DESCRIPTIONS -->
  <div
    class="hidden md:grid grid-cols-1 md:grid-cols-4 gap-10 w-full max-w-[987px] mt-8"
  >
    <!-- Desc 1 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Schedule a Consultation</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Book online, discuss your business needs—no commitment.
      </span>
    </div>

    <!-- Desc 2 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Customized Proposal</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Receive a tailored pricing plan based on volume and complexity.
      </span>
    </div>

    <!-- Desc 3 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Onboarding & Data Setup</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Share your financial documents; our team sets up your books.
      </span>
    </div>

    <!-- Desc 4 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Monthly Support & Monitoring</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Ongoing bookkeeping, tax prep, payroll, and advisory—all with proactive
        alerts and insights.
      </span>
    </div>
  </div>

  <!-- MOBILE VERSION (Stacked Blocks) -->
  <div class="flex flex-col gap-8 md:hidden w-full max-w-[480px] mx-auto mt-10">
    <!-- Step + Desc 1 -->
    <div class="flex flex-col items-center gap-4">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa] rounded-full border border-[#ed7c00] auto-hover-mobile"
      >
        <span class="text-[24px] font-semibold">1</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Schedule a Consultation
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Talk to us about your business goals and challenges, no strings
          attached.
        </p>
      </div>
    </div>

    <!-- Step + Desc 2 -->
    <div class="flex flex-col items-center gap-4">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa] rounded-full border border-[#ed7c00] auto-hover-mobile"
      >
        <span class="text-[24px] font-semibold">2</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Customized Proposal
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Receive a transparent quote based on your business size and
          complexity.
        </p>
      </div>
    </div>

    <!-- Step + Desc 3 -->
    <div class="flex flex-col items-center gap-4">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa] rounded-full border border-[#ed7c00] auto-hover-mobile"
      >
        <span class="text-[24px] font-semibold">3</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Onboarding & Data Setup
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Share your docs. We set up your systems and ensure nothing gets
          missed.
        </p>
      </div>
    </div>

    <!-- Step + Desc 4 -->
    <div class="flex flex-col items-center gap-4">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa] rounded-full border border-[#ed7c00] auto-hover-mobile"
      >
        <span class="text-[24px] font-semibold">4</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Monthly Support & Monitoring
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Get consistent bookkeeping, payroll, and tax support plus insights to
          stay ahead.
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("DOMContentLoaded", () => {
    const steps = document.querySelectorAll(".auto-hover-mobile");
    let index = 0;
    let intervalId = null;

    if (!steps.length) return;

    function cycleFill() {
      const current = steps[index];
      current.classList.add("bg-[#ed7c00]", "text-[#f5f7fa]");
      current.classList.remove("bg-[#f5f7fa]", "text-[#ed7c00]");

      index++;

      if (index >= steps.length) {
        setTimeout(() => {
          steps.forEach((step) => {
            step.classList.remove("bg-[#ed7c00]", "text-[#f5f7fa]");
            step.classList.add("bg-[#f5f7fa]", "text-[#ed7c00]");
          });
          index = 0;
        }, 1000);
      }
    }

    steps.forEach((step) => {
      step.classList.remove("bg-[#ed7c00]", "text-[#f5f7fa]");
      step.classList.add("bg-[#f5f7fa]", "text-[#ed7c00]");
    });

    ScrollTrigger.create({
      trigger: steps[0].closest("section") || steps[0],
      start: "top 75%",
      once: true,
      onEnter: () => {
        cycleFill();
        intervalId = setInterval(cycleFill, 1500);
      },
    });
  });
</script>
