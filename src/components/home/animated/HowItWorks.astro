<div
  class="flex w-full px-4 md:px-[120px] pt-[40px] pb-[40px] flex-col gap-[24px] items-center bg-[#f5f7fa] relative"
>
  <span class="text-[28px] sm:text-[32px] md:text-[36px] font-bold text-[#28241f] text-center md:text-left leading-tight tracking-tight"
    > A Process built around your Firm's needs</span
  >

  <!-- STEP FLOW: Numbers + Lines -->
  <div
    class="hidden md:flex justify-between items-center w-full max-w-[987px] mx-auto"
  >
    <!-- Step 1 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">1</span>
      </div>
    </div>

    <!-- Line 1 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/p0Y6n2e5S2.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 2 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full text-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[24px] font-semibold">2</span>
      </div>
    </div>

    <!-- Line 2 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/7JS9fieUBr.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 3 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">3</span>
      </div>
    </div>

    <!-- Line 3 -->
    <div
      class="w-[208px] h-px bg-[url('https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/kKLpbAtrCH.png')] bg-cover bg-no-repeat"
    >
    </div>

    <!-- Step 4 -->
    <div class="flex items-center">
      <div
        class="flex w-[50px] h-[50px] justify-center items-center rounded-full border border-[#ed7c00] bg-[#f5f7fa]"
      >
        <span class="text-[#ed7c00] text-[24px] font-semibold">4</span>
      </div>
    </div>
  </div>

  <!-- DESCRIPTIONS -->
  <div
    class="hidden md:grid grid-cols-1 md:grid-cols-4 gap-10 w-full max-w-[987px] mt-8"
  >
    <!-- Desc 1 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Onboarding & Setup</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        We start with a discovery call to understand your goals and tools, then handle data setup or migration and introduce your dedicated Finkeepers pod.
      </span>
    </div>

    <!-- Desc 2 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Execution & Coordination</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Your day-to-day finance tasks are managed efficiently with automation and clear workflows, plus a single point of contact for all updates.
      </span>
    </div>

    <!-- Desc 3 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Performance & Reporting</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        We set SLAs to monitor quality and timelines, providing a monthly dashboard of revenue, expenses, and cash flow, with optional review calls.
      </span>
    </div>

    <!-- Desc 4 -->
    <div class="flex flex-col gap-[12px] text-center md:text-left">
      <span class="text-[24px] font-semibold text-[#151515]"
        >Growth & Improvement</span
      >
      <span class="text-[16px] font-medium text-[#797979]">
        Services evolve with your business through feedback, new integrations, and scalable processes to keep finances smooth and audit-ready.
      </span>
    </div>
  </div>

  <!-- MOBILE VERSION (Stacked Blocks) -->
  <div class="flex flex-col gap-8 md:hidden w-full max-w-[480px] mx-auto mt-10">
    <!-- Step + Desc 1 -->
    <div class="flex flex-col items-center gap-4 step-item" data-step="1">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-white bg-[#ed7c00] border border-[#ed7c00] step-circle transition-all duration-500"
      >
        <span class="text-[24px] font-semibold">1</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Onboarding & Setup
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          We start with a discovery call to understand your goals and tools, then handle data setup or migration and introduce your dedicated Finkeepers pod.
        </p>
      </div>
      <!-- Theme Line -->
      <div class="w-[2px] h-[40px] bg-gradient-to-b from-[#f5f7fa] to-[#ed7c00] step-line opacity-30"></div>
    </div>

    <!-- Step + Desc 2 -->
    <div class="flex flex-col items-center gap-4 step-item" data-step="2">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-white bg-[#ed7c00] border border-[#ed7c00] step-circle transition-all duration-500"
      >
        <span class="text-[24px] font-semibold">2</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Execution & Coordination
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Your day-to-day finance tasks are managed efficiently with automation and clear workflows, plus a single point of contact for all updates.
        </p>
      </div>
      <!-- Theme Line -->
      <div class="w-[2px] h-[40px] bg-gradient-to-b from-[#f5f7fa] to-[#ed7c00] step-line opacity-30"></div>
    </div>

    <!-- Step + Desc 3 -->
    <div class="flex flex-col items-center gap-4 step-item" data-step="3">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-white bg-[#ed7c00] border border-[#ed7c00] step-circle transition-all duration-500"
      >
        <span class="text-[24px] font-semibold">3</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Performance & Reporting
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          We set SLAs to monitor quality and timelines, providing a monthly dashboard of revenue, expenses, and cash flow, with optional review calls.
        </p>
      </div>
      <!-- Theme Line -->
      <div class="w-[2px] h-[40px] bg-gradient-to-b from-[#f5f7fa] to-[#ed7c00] step-line opacity-30"></div>
    </div>

    <!-- Step + Desc 4 -->
    <div class="flex flex-col items-center gap-4 step-item" data-step="4">
      <div
        class="w-[50px] h-[50px] flex justify-center items-center rounded-full text-white bg-[#ed7c00] border border-[#ed7c00] step-circle transition-all duration-500"
      >
        <span class="text-[24px] font-semibold">4</span>
      </div>
      <div class="text-center">
        <p class="text-[20px] font-semibold text-[#151515] mb-1">
          Growth & Improvement
        </p>
        <p class="text-[16px] font-medium text-[#797979]">
          Services evolve with your business through feedback, new integrations, and scalable processes to keep finances smooth and audit-ready.
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("DOMContentLoaded", () => {
    const stepItems = document.querySelectorAll(".step-item");
    
    if (!stepItems.length) return;

    // Create scroll trigger for each step
    stepItems.forEach((stepItem, index) => {
      const stepCircle = stepItem.querySelector(".step-circle");
      const stepLine = stepItem.querySelector(".step-line");
      
      ScrollTrigger.create({
        trigger: stepItem,
        start: "top 80%",
        end: "bottom 20%",
        onEnter: () => {
          // Change to orange text on white background when active
          stepCircle.classList.remove("text-white", "bg-[#ed7c00]");
          stepCircle.classList.add("text-[#ed7c00]", "bg-white");
          
          // Animate the line if it exists
          if (stepLine) {
            stepLine.classList.remove("opacity-30");
            stepLine.classList.add("opacity-100");
          }
        },
        onLeave: () => {
          // Reset to white text on orange background
          stepCircle.classList.remove("text-[#ed7c00]", "bg-white");
          stepCircle.classList.add("text-white", "bg-[#ed7c00]");
          
          if (stepLine) {
            stepLine.classList.remove("opacity-100");
            stepLine.classList.add("opacity-30");
          }
        },
        onEnterBack: () => {
          // Change to orange text on white background when active again
          stepCircle.classList.remove("text-white", "bg-[#ed7c00]");
          stepCircle.classList.add("text-[#ed7c00]", "bg-white");
          
          if (stepLine) {
            stepLine.classList.remove("opacity-30");
            stepLine.classList.add("opacity-100");
          }
        },
        onLeaveBack: () => {
          // Reset to white text on orange background
          stepCircle.classList.remove("text-[#ed7c00]", "bg-white");
          stepCircle.classList.add("text-white", "bg-[#ed7c00]");
          
          if (stepLine) {
            stepLine.classList.remove("opacity-100");
            stepLine.classList.add("opacity-30");
          }
        }
      });
    });
  });
</script>

