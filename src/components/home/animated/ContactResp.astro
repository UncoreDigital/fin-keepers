<div
  id="contact-section"
  class="main-container w-full min-h-[622px] z-[50] relative mx-auto my-0 px-4 py-10 lg:py-0 cta"
  id="contact-form"
>
  <div
    class="max-w-[1320px] mx-auto h-auto lg:h-[715px] bg-[#106253] rounded-[20px] lg:rounded-[30px] relative flex flex-col lg:flex-row items-center justify-between px-4 lg:px-0 pb-8 lg:pb-20"
  >
    <div class="lg:pb-20 divContactUs" id="divContactUs">
      <!-- Form Section -->
      <div
        class="w-full lg:w-[470px] lg:h-[560px] flex flex-col gap-[24px] lg:gap-[32px] items-start mt-6 lg:mt-[80px] lg:ml-[60px] z-2"
      >

        <div class="h-20 hidden sm:block"></div>
        <div class="flex flex-col gap-[12px] items-start">
          <span class="text-[24px] sm:text-[28px] md:text-[32px] lg:text-[36px] font-bold leading-tight tracking-tight text-[#fff] font-['Inter']"
            >If You Are Ready To Trust Us, Let's Grow Together…
          </span>
          <span class="text-[16px] **font-normal** leading-tight tracking-tight text-[#fff] font-['Inter']"
            >
Ready for stress-free bookkeeping and smarter financial decisions? Connect with your Finkeepers pod now.
          </span>
        </div>
        <form id="contact-form-submit" class="w-full flex flex-col gap-[16px] lg:gap-[24px]">
          <!-- Name -->
          <div class="relative w-full">
            <label for="name" class="text-white text-[16px] font-['Inter']">Name</label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Enter your name"
            />
          </div>
          <!-- Email -->
          <div class="relative w-full">
            <label for="email" class="text-white text-[16px] font-['Inter']">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Enter your email"
            />
          </div>
          <!-- Company Name -->
          <div class="relative w-full">
            <label for="company" class="text-white text-[16px] font-['Inter']">Company Name</label>
            <input
              type="text"
              id="company"
              name="company"
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Enter your company name (optional)"
            />
          </div>
          <!-- Message -->
          <div class="relative w-full">
            <label for="message" class="text-white text-[16px] font-['Inter']">Message</label>
            <textarea
              id="message"
              name="message"
              rows="1"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Your message here..."></textarea>
          </div>
          <!-- Submit Button -->
          <button
            type="submit"
            class="bg-[#ed7c00] text-white font-semibold text-[18px] font-['Inter'] rounded-[8px] py-[12px] px-[30px] self-start w-full border border-transparent hover:bg-transparent hover:border-white hover:text-white hover:cursor-pointer transition duration-300 mb-6 md:mb-0"
          >
            Talk to our Experts
          </button>
          <div id="form-message" class="text-white text-sm font-['Inter'] hidden"></div>
        </form>

        <!-- Thank You Message -->
        <div
          id="thank-you-message"
          class="hidden w-full lg:w-[470px] flex-col gap-[24px] lg:gap-[32px] items-center justify-center text-center"
        >
          <div class="flex items-center justify-center mb-4">
            <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="flex flex-col gap-[12px] items-center">
            <span class="text-[28px] sm:text-[32px] md:text-[36px] lg:text-[40px] font-bold leading-tight tracking-tight text-[#fff] font-['Inter']">
              Thank you!
            </span>
            <span class="text-[16px] font-normal leading-tight tracking-tight text-[#fff] font-['Inter'] max-w-[400px]">
              Your form has been successfully submitted.<br>
              Our team will get back to you shortly.
            </span>
          </div>
          <button
            id="submit-another"
            class="bg-[#ed7c00] text-white font-semibold text-[18px] font-['Inter'] rounded-[8px] py-[12px] px-[30px] border border-transparent hover:bg-transparent hover:border-white hover:text-white hover:cursor-pointer transition duration-300"
          >
            Submit Another Message
          </button>
        </div>
      </div>

      <!-- Right Side Box -->

    <div
  class="w-full lg:w-[2000px] lg:absolute lg:top-[24px] lg:left-[600px] lg:h-[500px] z-20 flex flex-col justify-start mt-8 lg:mt-0"
>
  
  <div class="bg-[#106253] rounded-[15px] p-3 lg:p-4 mx-4 lg:ml-[40px] mt-4 lg:mt-[60px] w-auto lg:w-fit">
    <div
      class="w-full max-w-[510px] h-[212px] sm:h-[297px] lg:w-[510px] lg:h-[382px] bg-[url('/src/assets/new_contact.png')] bg-contain bg-no-repeat bg-center rounded-[10px] mx-auto"
    >
    </div>
  </div>

  </div>
</div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("DOMContentLoaded", () => {
    const ctaEl = document.querySelector(".cta");
    if (!ctaEl) return;

    gsap.from(ctaEl, {
      opacity: 0,
      y: 50, // start 50px lower
      duration: 0.8,
      ease: "power2.out",
      scrollTrigger: {
        trigger: ctaEl,
        start: "top 50%",
        once: true,
      },
    });

    // Contact form submission
    const form = document.getElementById("contact-form-submit");
    const formMessage = document.getElementById("form-message");
    const thankYouMessage = document.getElementById("thank-you-message");
    const submitAnotherButton = document.getElementById("submit-another");
    
    if (form && thankYouMessage) {
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        
        const formData = new FormData(form);
        const data = {
          name: formData.get("name"),
          email: formData.get("email"),
          message: formData.get("message"),
        };

        // Basic validation
        if (!data.name || !data.email || !data.message) {
          formMessage.textContent = "Please fill in all required fields.";
          formMessage.classList.remove("hidden", "text-green-400");
          formMessage.classList.add("text-red-500");
          setTimeout(() => {
            formMessage.classList.add("hidden");
          }, 3000);
          return;
        }

        // Show loading state
        const submitButton = form.querySelector("button[type='submit']");
        const originalText = submitButton?.textContent;
        if (submitButton) {
          submitButton.disabled = true;
          submitButton.textContent = "Sending...";
        }

        // Simulate successful submission (replace with actual API call)
        setTimeout(() => {
          // Hide form elements
          const formHeader = form.parentElement.querySelector('.flex.flex-col.gap-\\[12px\\].items-start');
          const formElement = form;
          
          if (formHeader) {
            formHeader.style.display = 'none';
          }
          formElement.style.display = 'none';
          
          // Show thank you message
          thankYouMessage.classList.remove('hidden');
          thankYouMessage.classList.add('flex');
          
          // Reset button state
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.textContent = originalText || "Talk to our Experts";
          }
        }, 1000);

        /* 
        // Uncomment this section for actual API integration
        try {
          const response = await fetch("https://api.web3forms.com/submit", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
            body: JSON.stringify({
              access_key: "YOUR_WEB3FORMS_ACCESS_KEY", // Replace with actual access key
              subject: "New Contact Form Submission - FinKeepers",
              from_name: data.name,
              email: data.email,
              message: data.message,
            }),
          });

          const result = await response.json();

          if (result.success) {
            // Hide form and show thank you message
            const formHeader = form.parentElement.querySelector('.flex.flex-col.gap-\\[12px\\].items-start');
            if (formHeader) formHeader.style.display = 'none';
            form.style.display = 'none';
            thankYouMessage.classList.remove('hidden');
            thankYouMessage.classList.add('flex');
          } else {
            throw new Error(result.message || "Failed to send message");
          }
        } catch (error) {
          formMessage.textContent = "Sorry, there was an error sending your message. Please try again.";
          formMessage.classList.remove("hidden", "text-green-400");
          formMessage.classList.add("text-red-500");
          setTimeout(() => {
            formMessage.classList.add("hidden");
          }, 5000);
        } finally {
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.textContent = originalText || "Talk to our Experts";
          }
        }
        */
      });

      // Handle "Submit Another Message" button
      if (submitAnotherButton) {
        submitAnotherButton.addEventListener("click", () => {
          // Reset form
          form.reset();
          
          // Show form elements again
          const formHeader = form.parentElement.querySelector('.flex.flex-col.gap-\\[12px\\].items-start');
          if (formHeader) {
            formHeader.style.display = '';
          }
          form.style.display = '';
          
          // Hide thank you message
          thankYouMessage.classList.add('hidden');
          thankYouMessage.classList.remove('flex');
        });
      }
    }
  });
</script>
