<div
  class="main-container w-full min-h-[622px] z-[50] relative mx-auto my-0 px-4 py-10 lg:py-0 cta"
  id="contact-form"
>
  <div
    class="max-w-[1320px] mx-auto h-auto lg:h-[715px] bg-[#106253] rounded-[30px] relative flex flex-col lg:flex-row items-center justify-between px-4 lg:px-0 pb-20"
  >
    <div class="lg:pb-20 divContactUs" id="divContactUs">
      <!-- Form Section -->
      <div
        class="w-full lg:w-[470px] lg:h-[560px] flex flex-col gap-[32px] items-start mt-10 lg:mt-[80px] lg:ml-[60px] z-2"
      >
        <div class="h-20 hidden sm:block"></div>
        <div class="flex flex-col gap-[12px] items-start">
          <span class="text-[34px] font-bold leading-[42px] text-[#fff] font-['Inter']"
            >If you are ready to trust us, let's grow togetherâ€¦
          </span>
          <span class="text-[16px] font-medium leading-[22px] text-[#fff] font-['Inter']"
            >Why don't we talk about how Finkeepers can help your business gain
            some financial growth and strength via our Bookkeeping services.
          </span>
        </div>
        <form id="contact-form-submit" class="w-full flex flex-col gap-[24px]">
          <!-- Name -->
          <div class="relative w-full">
            <label for="name" class="text-white text-[16px] font-['Inter']">Name</label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Enter your name"
            />
          </div>
          <!-- Email -->
          <div class="relative w-full">
            <label for="email" class="text-white text-[16px] font-['Inter']">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Enter your email"
            />
          </div>
          <!-- Message -->
          <div class="relative w-full">
            <label for="message" class="text-white text-[16px] font-['Inter']">Message</label>
            <textarea
              id="message"
              name="message"
              rows="4"
              required
              class="w-full bg-[#106253] border-b border-white text-white mt-1 py-2 px-2 outline-none font-['Inter'] placeholder:text-white/50"
              placeholder="Your message here..."></textarea>
          </div>
          <!-- Submit Button -->
          <button
            type="submit"
            class="bg-[#ed7c00] text-white font-semibold text-[18px] font-['Inter'] rounded-[8px] py-[12px] px-[30px] self-start w-full border border-transparent hover:bg-transparent hover:border-white hover:text-white hover:cursor-pointer transition duration-300 mb-6 md:mb-0"
          >
            Talk to our Experts
          </button>
          <div id="form-message" class="text-white text-sm font-['Inter'] hidden"></div>
        </form>
      </div>

      <!-- Right Side Box -->

      <div
        class="w-full lg:w-[660px] bg-white rounded-tr-[30px] rounded-br-[30px] p-[24px] lg:absolute lg:top-[24px] lg:left-[636px] lg:h-[574px] z-20 flex flex-col justify-start"
      >
        <p class="text-[#797979] text-[16px] leading-[20px] mb-20"></p>
        <div
          class="mt-8 w-full h-[200px] bg-[url(https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/dtf0PMDgco.png)] bg-cover bg-no-repeat rounded-[10px] mb-6"
        >
        </div>
        <div class="flex flex-col gap-6">
          <div
            class="flex gap-[12px] items-start w-full flex-nowrap relative z-[26] pr-4"
          >
            <div
              class="min-w-[20px] w-[20px] h-[24px] shrink-0 bg-[url(https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/a3ZruQ1T9R.png)] bg-cover bg-no-repeat relative z-[27]"
            >
            </div>
            <a
              href="https://www.google.com/maps/search/?api=1&query=30+N+Gould+ST+STE+R,+Sheridan,+Wyoming,+82801"
              target="_blank"
              rel="noopener noreferrer"
              class="text-[16px] text-[#797979] font-['Inter'] leading-[22px] w-full hover:text-[#ed7c00] transition-colors cursor-pointer"
            >
              30 N Gould ST STE R, Sheridan, Wyoming, 82801
              <br />
              United States of America
            </a>
          </div>

          <!-- <div class="flex gap-4 items-center">
            <div
              class="mt-4 w-[22px] h-[22px] bg-[url(https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/RjMPdasAGf.png)] bg-no-repeat bg-cover"
            >
            </div>
            <span class="text-[#797979] text-[16px]">+ 123 456 789</span>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("DOMContentLoaded", () => {
    const ctaEl = document.querySelector(".cta");
    if (!ctaEl) return;

    gsap.from(ctaEl, {
      opacity: 0,
      y: 50, // start 50px lower
      duration: 0.8,
      ease: "power2.out",
      scrollTrigger: {
        trigger: ctaEl,
        start: "top 50%",
        once: true,
      },
    });

    // Contact form submission
    const form = document.getElementById("contact-form-submit");
    const formMessage = document.getElementById("form-message");
    
    if (form) {
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        
        const formData = new FormData(form);
        const data = {
          name: formData.get("name"),
          email: formData.get("email"),
          message: formData.get("message"),
        };

        // Show loading state
        const submitButton = form.querySelector("button[type='submit']");
        const originalText = submitButton?.textContent;
        if (submitButton) {
          submitButton.disabled = true;
          submitButton.textContent = "Sending...";
        }

        try {
          // Using Web3Forms API as a reliable backend solution
          const response = await fetch("https://api.web3forms.com/submit", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
            body: JSON.stringify({
              access_key: "YOUR_WEB3FORMS_ACCESS_KEY", // Replace with actual access key from web3forms.com
              subject: "New Contact Form Submission - FinKeepers",
              from_name: data.name,
              email: data.email,
              message: data.message,
            }),
          });

          const result = await response.json();

          if (result.success) {
            formMessage.textContent = "Thank you! Your message has been sent successfully.";
            formMessage.classList.remove("hidden", "text-red-500");
            formMessage.classList.add("text-green-400");
            form.reset();
          } else {
            throw new Error(result.message || "Failed to send message");
          }
        } catch (error) {
          formMessage.textContent = "Sorry, there was an error sending your message. Please try again or contact us directly at info@finkeepers.com";
          formMessage.classList.remove("hidden", "text-green-400");
          formMessage.classList.add("text-red-500");
          console.error("Form submission error:", error);
        } finally {
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.textContent = originalText || "Talk to our Experts";
          }
          
          // Hide message after 5 seconds
          setTimeout(() => {
            formMessage.classList.add("hidden");
          }, 5000);
        }
      });
    }
  });
</script>
