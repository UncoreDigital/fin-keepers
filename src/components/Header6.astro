<header
  id="main-header"
  class="bg-[#0e2726] w-full px-4 sm:px-6 lg:px-[60px] py-[12px] fixed top-0 left-0 z-[2000] transition-colors duration-300"
>
  <div
    class="flex justify-between items-center max-w-[1440px] mx-auto !overflow-x-hidden"
  >
    <!-- Logo -->
    <a href="/"
      ><div
        class="w-[121.549px] h-[66.001px] bg-[url(/img/logo/logo.svg)] bg-[length:100%_100%] bg-no-repeat"
      >
      </div></a
    >

    <!-- Hamburger (Mobile) -->
    <div class="lg:hidden">
      <button
        id="menu-toggle"
        class="flex flex-col gap-[4px]"
        aria-label="Toggle Menu"
      >
        <span class="w-6 h-[2px] bg-white block"></span>
        <span class="w-6 h-[2px] bg-white block"></span>
        <span class="w-6 h-[2px] bg-white block"></span>
      </button>
    </div>

    <!-- Navigation Links (Desktop) -->
    <nav
      class="hidden lg:flex gap-[24px] text-white items-center text-[16px] relative"
    >
      <div class="flex items-center gap-[4px]">
        <a href="/about"><span>About</span></a>
      </div>

      <!-- Services Dropdown -->
      <div class="relative flex items-center gap-[4px] cursor-pointer">
        <span id="services-toggle">Services</span>
        <img
          class="w-[14px]"
          src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/nLqr2JveAt.png"
        />
        <div
          id="services-menu"
          class="hidden absolute top-full left-0 mt-2 w-56 bg-white text-black rounded-md shadow-lg z-[3000]"
        >
          <a
            href="/services/book-keeping"
            class="block px-4 py-2 hover:bg-gray-100">Book Keeping</a
          >
          <a
            href="/services/financial-modeling"
            class="block px-4 py-2 hover:bg-gray-100">Financial Modeling</a
          >
          <a href="/services/fpna" class="block px-4 py-2 hover:bg-gray-100"
            >FP & A</a
          >
          <a
            href="/services/historical-cleanup"
            class="block px-4 py-2 hover:bg-gray-100">Historical Cleanup</a
          >
          <a
            href="/services/payroll-assistance"
            class="block px-4 py-2 hover:bg-gray-100">Payroll Assistance</a
          >
          <a
            href="/services/audit-support"
            class="block px-4 py-2 hover:bg-gray-100">Audit Support</a
          >
        </div>
      </div>

      <!-- Resources Dropdown -->
      <div class="relative flex items-center gap-[4px] cursor-pointer">
        <span id="resources-toggle">Resources</span>
        <img
          class="w-[14px]"
          src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-07-26/DBwZjXhgMZ.png"
        />
        <div
          id="resources-menu"
          class="hidden absolute top-full left-0 mt-2 w-40 bg-white text-black rounded-md shadow-lg z-[3000]"
        >
          <a href="/blogs" class="block px-4 py-2 hover:bg-gray-100">Blogs</a>
          <a href="/case-study" class="block px-4 py-2 hover:bg-gray-100"
            >Case Study</a
          >
        </div>
      </div>

      <div class="flex items-center gap-[4px]">
        <a href="/pricing"><span>Pricing</span></a>
      </div>
      <div class="flex items-center gap-[4px]">
        <a href="/contact"><span>Contact Us</span></a>
      </div>
    </nav>

    <!-- Get In Touch Button (Desktop) -->
    <a
      href="/"
      class="hidden lg:flex px-4 py-1 border border-white text-white rounded-md text-sm font-semibold cursor-pointer"
    >
      Get In Touch
    </a>
  </div>

  <!-- Mobile Dropdown -->
  <div
    id="mobile-menu"
    class="hidden lg:hidden mt-4 flex flex-col gap-4 text-white px-2"
  >
    <a href="/about">About</a>
    <div>
      <button class="w-full text-left" id="mobile-services-toggle"
        >Services ▾</button
      >
      <div id="mobile-services-menu" class="hidden flex flex-col gap-2 pl-4">
        <a href="/services/book-keeping">Book Keeping</a>
        <a href="/services/financial-modeling">Financial Modeling</a>
        <a href="/services/fpna">FP & A</a>
        <a href="/services/historical-cleanup">Historical Cleanup</a>
        <a href="/services/payroll-assistance">Payroll Assistance</a>
        <a href="/services/audit-support">Audit Support</a>
      </div>
    </div>
    <div>
      <button class="w-full text-left" id="mobile-resources-toggle"
        >Resources ▾</button
      >
      <div id="mobile-resources-menu" class="hidden flex flex-col gap-2 pl-4">
        <a href="/blogs">Blogs</a>
        <a href="/case-study">Case Study</a>
      </div>
    </div>
    <a href="/pricing">Pricing</a>
    <a href="/contact">Contact Us</a>
    <a href="/">
      <button
        class="mt-2 px-4 py-2 border border-white text-white rounded-md font-semibold"
      >
        Get In Touch
      </button></a
    >
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById(
      "menu-toggle"
    ) as HTMLButtonElement | null;
    const menu = document.getElementById("mobile-menu") as HTMLElement | null;
    const header = document.getElementById("main-header") as HTMLElement | null;

    const resourcesToggle = document.getElementById(
      "resources-toggle"
    ) as HTMLElement | null;
    const resourcesMenu = document.getElementById(
      "resources-menu"
    ) as HTMLElement | null;
    const servicesToggle = document.getElementById(
      "services-toggle"
    ) as HTMLElement | null;
    const servicesMenu = document.getElementById(
      "services-menu"
    ) as HTMLElement | null;

    const mobileServicesToggle = document.getElementById(
      "mobile-services-toggle"
    ) as HTMLElement | null;
    const mobileServicesMenu = document.getElementById(
      "mobile-services-menu"
    ) as HTMLElement | null;
    const mobileResourcesToggle = document.getElementById(
      "mobile-resources-toggle"
    ) as HTMLElement | null;
    const mobileResourcesMenu = document.getElementById(
      "mobile-resources-menu"
    ) as HTMLElement | null;

    if (toggle && menu) {
      toggle.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });
    }

    if (header) {
      window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
          header.classList.add("bg-[#093634]");
        } else {
          header.classList.remove("bg-[#093634]");
        }
      });
    }

    // Desktop Dropdown Logic
    if (resourcesToggle && resourcesMenu) {
      resourcesToggle.addEventListener("click", (e) => {
        e.stopPropagation();
        resourcesMenu.classList.toggle("hidden");
        if (servicesMenu) servicesMenu.classList.add("hidden");
      });
    }

    if (servicesToggle && servicesMenu) {
      servicesToggle.addEventListener("click", (e) => {
        e.stopPropagation();
        servicesMenu.classList.toggle("hidden");
        if (resourcesMenu) resourcesMenu.classList.add("hidden");
      });
    }

    document.addEventListener("click", (e) => {
      const target = e.target as Node;
      if (
        resourcesMenu &&
        resourcesToggle &&
        !resourcesMenu.contains(target) &&
        !resourcesToggle.contains(target)
      ) {
        resourcesMenu.classList.add("hidden");
      }
      if (
        servicesMenu &&
        servicesToggle &&
        !servicesMenu.contains(target) &&
        !servicesToggle.contains(target)
      ) {
        servicesMenu.classList.add("hidden");
      }
    });

    // Mobile Dropdown Logic
    if (mobileServicesToggle && mobileServicesMenu) {
      mobileServicesToggle.addEventListener("click", () => {
        mobileServicesMenu.classList.toggle("hidden");
      });
    }
    if (mobileResourcesToggle && mobileResourcesMenu) {
      mobileResourcesToggle.addEventListener("click", () => {
        mobileResourcesMenu.classList.toggle("hidden");
      });
    }
  });
</script>
