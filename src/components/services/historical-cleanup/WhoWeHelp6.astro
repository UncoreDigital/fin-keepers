---
import salesImage from "../../../assets/services/book-keeping/sales.png";
---

<div class="main-container bg-[#f5f7fa] py-16 px-4 sm:px-6 lg:px-20 mx-auto">
  <div
    class="max-w-screen-xl mx-auto flex flex-col gap-12 sm:gap-16 lg:gap-24 items-center animate-on-scroll opacity-0"
  >
    <!-- Heading -->
    <div
      class="flex flex-col gap-6 sm:gap-8 lg:gap-12 items-center text-center w-full animate-on-scroll-child opacity-0"
    >
      <h2
        class="text-2xl sm:text-3xl lg:text-4xl font-bold leading-tight text-[#04092a]"
      >
        Who We Help
      </h2>
      <p
        class="text-base sm:text-lg leading-relaxed text-[#5c667a] max-w-3xl mx-auto"
      >
        Lorem Ipsum is simply dummy text of the printing and typesetting
        industry. Lorem Ipsum has been the industry's standard dummy text ever
        since the 1500s, when an unkok.
      </p>
    </div>

    <!-- Tabs -->
    <div class="relative w-full overflow-hidden animate-on-scroll-child opacity-0">
      <div
        id="tabsContainer"
        class="flex overflow-x-auto gap-3 px-4 py-4 sm:px-0 sm:py-6 scrollbar-hide scroll-smooth bg-white justify-start sm:justify-center max-w-full mx-auto snap-x snap-mandatory"
      >
        <button
          class="tab-button flex-shrink-0 px-4 py-2 bg-[#ed7c00] text-white rounded-md text-sm font-semibold whitespace-nowrap snap-start"
          data-tab="startups"
        >
          Startups & Solopreneurs
        </button>
        <button
          class="tab-button flex-shrink-0 px-4 py-2 text-[#797979] border border-[#ccc] rounded-md text-sm font-medium whitespace-nowrap snap-start"
          data-tab="ecommerce"
        >
          eCommerce Brands
        </button>
        <button
          class="tab-button flex-shrink-0 px-4 py-2 text-[#797979] border border-[#ccc] rounded-md text-sm font-medium whitespace-nowrap snap-start"
          data-tab="agencies"
        >
          Agencies & Freelancers
        </button>
        <button
          class="tab-button flex-shrink-0 px-4 py-2 text-[#797979] border border-[#ccc] rounded-md text-sm font-medium whitespace-nowrap snap-start"
          data-tab="service"
        >
          Service-Based SMBs
        </button>
        <button
          class="tab-button flex-shrink-0 px-4 py-2 text-[#797979] border border-[#ccc] rounded-md text-sm font-medium whitespace-nowrap snap-start"
          data-tab="healthcare"
        >
          Healthcare Providers
        </button>
        <button
          class="tab-button flex-shrink-0 px-4 py-2 text-[#797979] border border-[#ccc] rounded-md text-sm font-medium whitespace-nowrap snap-start"
          data-tab="property"
        >
          Property Managers
        </button>
      </div>
    </div>

    <!-- Content -->
    <div
      class="flex flex-col lg:flex-row gap-6 sm:gap-8 lg:gap-0 justify-center w-full max-w-screen-lg mx-auto animate-on-scroll-child opacity-0"
    >
      <!-- Left -->
      <div
        class="flex flex-col gap-6 sm:gap-8 p-4 sm:p-5 bg-white rounded-lg lg:rounded-r-none w-full lg:w-1/2 flex-grow"
      >
        <div class="flex flex-col gap-4 sm:gap-6 items-start">
          <div
            id="tabIcon"
            class="w-9 h-9 sm:w-10 sm:h-10 shrink-0 bg-[url(https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-08-02/pjiTWgYf5p.png)] bg-cover bg-no-repeat overflow-hidden"
          ></div>

          <h3
            id="tabTitle"
            class="text-xl sm:text-2xl font-semibold leading-tight text-[#151515]"
          >
            Startups & Solopreneurs
          </h3>
        </div>
        <p
          id="tabDescription"
          class="text-base sm:text-lg font-medium leading-relaxed text-[#797979]"
        >
          Lorem Ipsum is simply dummy text of the printing and typesetting
          industry. Lorem Ipsum has been the industry's standard dummy text ever
          since the 1500s, when an unkok.
        </p>
        <a
          href="#"
          class="text-[#ed7c00] font-semibold text-base sm:text-lg hover:underline"
        >
          Learn More
        </a>
      </div>

      <!-- Right -->
      <div
        class="flex justify-center items-center p-4 sm:p-5 bg-[#f5f7fa] rounded-lg lg:rounded-l-none w-full lg:w-1/2 flex-grow"
      >
        <img
          id="tabImage"
          src={salesImage.src}
          alt=""
          class="w-full h-auto max-w-[500px] max-h-[250px]"
          style="aspect-ratio: 504.455 / 224;"
        />
      </div>
    </div>
  </div>
</div>

<style>
  @keyframes fade-up {
    0% {
      opacity: 0;
      transform: translateY(30px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-up {
    animation: fade-up 0.8s ease-out forwards;
  }
</style>

<script>
  // Tabs logic (unchanged)
  const tabContent = { /* same as your original */ };

  const tabButtons = document.querySelectorAll(".tab-button");
  const tabTitle = document.getElementById("tabTitle");
  const tabDescription = document.getElementById("tabDescription");
  const tabIcon = document.getElementById("tabIcon");
  const tabImage = document.getElementById("tabImage");

  function updateActiveTab(activeButton) {
    tabButtons.forEach((button) => {
      button.classList.remove("bg-[#ed7c00]", "text-white", "font-semibold");
      button.classList.add("text-[#797979]", "border", "border-[#ccc]", "font-medium");
    });
    activeButton.classList.remove("text-[#797979]", "border", "border-[#ccc]", "font-medium");
    activeButton.classList.add("bg-[#ed7c00]", "text-white", "font-semibold");
  }

  function updateContent(tabKey) {
    const content = tabContent[tabKey];
    if (content && tabTitle && tabDescription && tabIcon && tabImage) {
      tabTitle.textContent = content.title;
      tabDescription.textContent = content.description;
      tabIcon.style.backgroundImage = `url(${content.icon})`;
      tabImage.src = content.image;
      tabImage.alt = content.title;
    }
  }

  tabButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const tabKey = button.getAttribute("data-tab");
      if (tabKey) {
        updateActiveTab(button);
        updateContent(tabKey);
      }
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
    const firstTab = tabButtons[0];
    const firstTabKey = firstTab?.getAttribute("data-tab");
    if (firstTab && firstTabKey) {
      updateActiveTab(firstTab);
      updateContent(firstTabKey);
    }
  });

  // Scroll animation logic
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          if (entry.target.classList.contains("animate-on-scroll")) {
            entry.target.classList.add("animate-fade-up");
            entry.target.classList.remove("opacity-0");
            const children = entry.target.querySelectorAll(".animate-on-scroll-child");
            children.forEach((child, index) => {
              setTimeout(() => {
                child.classList.add("animate-fade-up");
                child.classList.remove("opacity-0");
              }, index * 200);
            });
            observer.unobserve(entry.target);
          }
        }
      });
    },
    { threshold: 0.2 }
  );

  document.querySelectorAll(".animate-on-scroll").forEach((el) => {
    observer.observe(el);
  });
</script>
